{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport axios from 'axios';\nimport { PRODUCT_LIST_REQUEST, PRODUCT_LIST_SUCCESS, PRODUCT_LIST_FAIL, PRODUCT_DETAILS_REQUEST, PRODUCT_DETAILS_SUCCESS, PRODUCT_DETAILS_FAIL, PRODUCT_DELETE_SUCCESS, PRODUCT_DELETE_REQUEST, PRODUCT_DELETE_FAIL, PRODUCT_CREATE_REQUEST, PRODUCT_CREATE_SUCCESS, PRODUCT_CREATE_FAIL, PRODUCT_UPDATE_REQUEST, PRODUCT_UPDATE_SUCCESS, PRODUCT_UPDATE_FAIL, PRODUCT_CREATE_REVIEW_REQUEST, PRODUCT_CREATE_REVIEW_SUCCESS, PRODUCT_CREATE_REVIEW_FAIL, PRODUCT_TOP_REQUEST, PRODUCT_TOP_SUCCESS, PRODUCT_TOP_FAIL } from \"../constants/productConstants\";\nimport { logout } from \"./userActions\";\nimport baseURL from \"../../assets/common/baseUrl\";\nexport var listProducts = function listProducts() {\n  var keyword = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var pageNumber = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  return function _callee(dispatch) {\n    var _await$axios$get, data;\n\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            dispatch({\n              type: PRODUCT_LIST_REQUEST\n            });\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(axios.get(baseURL + \"products?keyword=\" + keyword + \"&pageNumber=\" + pageNumber));\n\n          case 4:\n            _await$axios$get = _context.sent;\n            data = _await$axios$get.data;\n            dispatch({\n              type: PRODUCT_LIST_SUCCESS,\n              payload: data\n            });\n            _context.next = 12;\n            break;\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](0);\n            dispatch({\n              type: PRODUCT_LIST_FAIL,\n              payload: _context.t0.response && _context.t0.response.data.message ? _context.t0.response.data.message : _context.t0.message\n            });\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 9]], Promise);\n  };\n};\nexport var listProductDetails = function listProductDetails(id) {\n  return function _callee2(dispatch) {\n    var _await$axios$get2, data;\n\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            dispatch({\n              type: PRODUCT_DETAILS_REQUEST\n            });\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(axios.get(\"/api/products/\" + id));\n\n          case 4:\n            _await$axios$get2 = _context2.sent;\n            data = _await$axios$get2.data;\n            dispatch({\n              type: PRODUCT_DETAILS_SUCCESS,\n              payload: data\n            });\n            _context2.next = 12;\n            break;\n\n          case 9:\n            _context2.prev = 9;\n            _context2.t0 = _context2[\"catch\"](0);\n            dispatch({\n              type: PRODUCT_DETAILS_FAIL,\n              payload: _context2.t0.response && _context2.t0.response.data.message ? _context2.t0.response.data.message : _context2.t0.message\n            });\n\n          case 12:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 9]], Promise);\n  };\n};\nexport var deleteProduct = function deleteProduct(id) {\n  return function _callee3(dispatch, getState) {\n    var _getState, userInfo, config, message;\n\n    return _regeneratorRuntime.async(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            dispatch({\n              type: PRODUCT_DELETE_REQUEST\n            });\n            _getState = getState(), userInfo = _getState.userLogin.userInfo;\n            config = {\n              headers: {\n                Authorization: \"Bearer \" + userInfo.token\n              }\n            };\n            _context3.next = 6;\n            return _regeneratorRuntime.awrap(axios.delete(\"/api/products/\" + id, config));\n\n          case 6:\n            dispatch({\n              type: PRODUCT_DELETE_SUCCESS\n            });\n            _context3.next = 14;\n            break;\n\n          case 9:\n            _context3.prev = 9;\n            _context3.t0 = _context3[\"catch\"](0);\n            message = _context3.t0.response && _context3.t0.response.data.message ? _context3.t0.response.data.message : _context3.t0.message;\n\n            if (message === 'Not authorized, token failed') {\n              dispatch(logout());\n            }\n\n            dispatch({\n              type: PRODUCT_DELETE_FAIL,\n              payload: message\n            });\n\n          case 14:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[0, 9]], Promise);\n  };\n};\nexport var createProduct = function createProduct() {\n  return function _callee4(dispatch, getState) {\n    var _getState2, userInfo, config, _await$axios$post, data, message;\n\n    return _regeneratorRuntime.async(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            dispatch({\n              type: PRODUCT_CREATE_REQUEST\n            });\n            _getState2 = getState(), userInfo = _getState2.userLogin.userInfo;\n            config = {\n              headers: {\n                Authorization: \"Bearer \" + userInfo.token\n              }\n            };\n            _context4.next = 6;\n            return _regeneratorRuntime.awrap(axios.post(\"/api/products\", {}, config));\n\n          case 6:\n            _await$axios$post = _context4.sent;\n            data = _await$axios$post.data;\n            dispatch({\n              type: PRODUCT_CREATE_SUCCESS,\n              payload: data\n            });\n            _context4.next = 16;\n            break;\n\n          case 11:\n            _context4.prev = 11;\n            _context4.t0 = _context4[\"catch\"](0);\n            message = _context4.t0.response && _context4.t0.response.data.message ? _context4.t0.response.data.message : _context4.t0.message;\n\n            if (message === 'Not authorized, token failed') {\n              dispatch(logout());\n            }\n\n            dispatch({\n              type: PRODUCT_CREATE_FAIL,\n              payload: message\n            });\n\n          case 16:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, [[0, 11]], Promise);\n  };\n};\nexport var updateProduct = function updateProduct(product) {\n  return function _callee5(dispatch, getState) {\n    var _getState3, userInfo, config, _await$axios$put, data, message;\n\n    return _regeneratorRuntime.async(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.prev = 0;\n            dispatch({\n              type: PRODUCT_UPDATE_REQUEST\n            });\n            _getState3 = getState(), userInfo = _getState3.userLogin.userInfo;\n            config = {\n              headers: {\n                'Content-Type': 'application/json',\n                Authorization: \"Bearer \" + userInfo.token\n              }\n            };\n            _context5.next = 6;\n            return _regeneratorRuntime.awrap(axios.put(\"/api/products/\" + product._id, product, config));\n\n          case 6:\n            _await$axios$put = _context5.sent;\n            data = _await$axios$put.data;\n            dispatch({\n              type: PRODUCT_UPDATE_SUCCESS,\n              payload: data\n            });\n            _context5.next = 16;\n            break;\n\n          case 11:\n            _context5.prev = 11;\n            _context5.t0 = _context5[\"catch\"](0);\n            message = _context5.t0.response && _context5.t0.response.data.message ? _context5.t0.response.data.message : _context5.t0.message;\n\n            if (message === 'Not authorized, token failed') {\n              dispatch(logout());\n            }\n\n            dispatch({\n              type: PRODUCT_UPDATE_FAIL,\n              payload: message\n            });\n\n          case 16:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, null, [[0, 11]], Promise);\n  };\n};\nexport var createProductReview = function createProductReview(productId, review) {\n  return function _callee6(dispatch, getState) {\n    var _getState4, userInfo, config, message;\n\n    return _regeneratorRuntime.async(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.prev = 0;\n            dispatch({\n              type: PRODUCT_CREATE_REVIEW_REQUEST\n            });\n            _getState4 = getState(), userInfo = _getState4.userLogin.userInfo;\n            config = {\n              headers: {\n                'Content-Type': 'application/json',\n                Authorization: \"Bearer \" + userInfo.token\n              }\n            };\n            _context6.next = 6;\n            return _regeneratorRuntime.awrap(axios.post(\"/api/products/\" + productId + \"/reviews\", review, config));\n\n          case 6:\n            dispatch({\n              type: PRODUCT_CREATE_REVIEW_SUCCESS\n            });\n            _context6.next = 14;\n            break;\n\n          case 9:\n            _context6.prev = 9;\n            _context6.t0 = _context6[\"catch\"](0);\n            message = _context6.t0.response && _context6.t0.response.data.message ? _context6.t0.response.data.message : _context6.t0.message;\n\n            if (message === 'Not authorized, token failed') {\n              dispatch(logout());\n            }\n\n            dispatch({\n              type: PRODUCT_CREATE_REVIEW_FAIL,\n              payload: message\n            });\n\n          case 14:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, null, null, [[0, 9]], Promise);\n  };\n};\nexport var listTopProducts = function listTopProducts() {\n  return function _callee7(dispatch) {\n    var _await$axios$get3, data;\n\n    return _regeneratorRuntime.async(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.prev = 0;\n            dispatch({\n              type: PRODUCT_TOP_REQUEST\n            });\n            _context7.next = 4;\n            return _regeneratorRuntime.awrap(axios.get(\"/api/products/top\"));\n\n          case 4:\n            _await$axios$get3 = _context7.sent;\n            data = _await$axios$get3.data;\n            dispatch({\n              type: PRODUCT_TOP_SUCCESS,\n              payload: data\n            });\n            _context7.next = 12;\n            break;\n\n          case 9:\n            _context7.prev = 9;\n            _context7.t0 = _context7[\"catch\"](0);\n            dispatch({\n              type: PRODUCT_TOP_FAIL,\n              payload: _context7.t0.response && _context7.t0.response.data.message ? _context7.t0.response.data.message : _context7.t0.message\n            });\n\n          case 12:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, null, null, [[0, 9]], Promise);\n  };\n};","map":{"version":3,"sources":["E:/reactproj/abc_medo1/frontend/src/actions/productActions.js"],"names":["axios","PRODUCT_LIST_REQUEST","PRODUCT_LIST_SUCCESS","PRODUCT_LIST_FAIL","PRODUCT_DETAILS_REQUEST","PRODUCT_DETAILS_SUCCESS","PRODUCT_DETAILS_FAIL","PRODUCT_DELETE_SUCCESS","PRODUCT_DELETE_REQUEST","PRODUCT_DELETE_FAIL","PRODUCT_CREATE_REQUEST","PRODUCT_CREATE_SUCCESS","PRODUCT_CREATE_FAIL","PRODUCT_UPDATE_REQUEST","PRODUCT_UPDATE_SUCCESS","PRODUCT_UPDATE_FAIL","PRODUCT_CREATE_REVIEW_REQUEST","PRODUCT_CREATE_REVIEW_SUCCESS","PRODUCT_CREATE_REVIEW_FAIL","PRODUCT_TOP_REQUEST","PRODUCT_TOP_SUCCESS","PRODUCT_TOP_FAIL","logout","baseURL","listProducts","keyword","pageNumber","dispatch","type","get","data","payload","response","message","listProductDetails","id","deleteProduct","getState","userInfo","userLogin","config","headers","Authorization","token","delete","createProduct","post","updateProduct","product","put","_id","createProductReview","productId","review","listTopProducts"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SACEC,oBADF,EAEEC,oBAFF,EAGEC,iBAHF,EAIEC,uBAJF,EAKEC,uBALF,EAMEC,oBANF,EAOEC,sBAPF,EAQEC,sBARF,EASEC,mBATF,EAUEC,sBAVF,EAWEC,sBAXF,EAYEC,mBAZF,EAaEC,sBAbF,EAcEC,sBAdF,EAeEC,mBAfF,EAgBEC,6BAhBF,EAiBEC,6BAjBF,EAkBEC,0BAlBF,EAmBEC,mBAnBF,EAoBEC,mBApBF,EAqBEC,gBArBF;AAuBA,SAASC,MAAT;AACA,OAAOC,OAAP;AACA,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAe;AAAA,MAACC,OAAD,uEAAW,EAAX;AAAA,MAAeC,UAAf,uEAA4B,EAA5B;AAAA,SAAmC,iBAC7DC,QAD6D;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAI3DA,YAAAA,QAAQ,CAAC;AAAEC,cAAAA,IAAI,EAAE3B;AAAR,aAAD,CAAR;AAJ2D;AAAA,6CAMpCD,KAAK,CAAC6B,GAAN,CAClBN,OADkB,yBACSE,OADT,oBAC+BC,UAD/B,CANoC;;AAAA;AAAA;AAMnDI,YAAAA,IANmD,oBAMnDA,IANmD;AAU3DH,YAAAA,QAAQ,CAAC;AACPC,cAAAA,IAAI,EAAE1B,oBADC;AAEP6B,cAAAA,OAAO,EAAED;AAFF,aAAD,CAAR;AAV2D;AAAA;;AAAA;AAAA;AAAA;AAe3DH,YAAAA,QAAQ,CAAC;AACPC,cAAAA,IAAI,EAAEzB,iBADC;AAEP4B,cAAAA,OAAO,EACL,YAAMC,QAAN,IAAkB,YAAMA,QAAN,CAAeF,IAAf,CAAoBG,OAAtC,GACI,YAAMD,QAAN,CAAeF,IAAf,CAAoBG,OADxB,GAEI,YAAMA;AALL,aAAD,CAAR;;AAf2D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAnC;AAAA,CAArB;AAyBP,OAAO,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,EAAD;AAAA,SAAQ,kBAAOR,QAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEtCA,YAAAA,QAAQ,CAAC;AAAEC,cAAAA,IAAI,EAAExB;AAAR,aAAD,CAAR;AAFsC;AAAA,6CAIfJ,KAAK,CAAC6B,GAAN,oBAA2BM,EAA3B,CAJe;;AAAA;AAAA;AAI9BL,YAAAA,IAJ8B,qBAI9BA,IAJ8B;AAMtCH,YAAAA,QAAQ,CAAC;AACPC,cAAAA,IAAI,EAAEvB,uBADC;AAEP0B,cAAAA,OAAO,EAAED;AAFF,aAAD,CAAR;AANsC;AAAA;;AAAA;AAAA;AAAA;AAWtCH,YAAAA,QAAQ,CAAC;AACPC,cAAAA,IAAI,EAAEtB,oBADC;AAEPyB,cAAAA,OAAO,EACL,aAAMC,QAAN,IAAkB,aAAMA,QAAN,CAAeF,IAAf,CAAoBG,OAAtC,GACI,aAAMD,QAAN,CAAeF,IAAf,CAAoBG,OADxB,GAEI,aAAMA;AALL,aAAD,CAAR;;AAXsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAR;AAAA,CAA3B;AAqBP,OAAO,IAAMG,aAAa,GAAG,SAAhBA,aAAgB,CAACD,EAAD;AAAA,SAAQ,kBAAOR,QAAP,EAAiBU,QAAjB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEjCV,YAAAA,QAAQ,CAAC;AACPC,cAAAA,IAAI,EAAEpB;AADC,aAAD,CAAR;AAFiC,wBAQ7B6B,QAAQ,EARqB,EAOlBC,QAPkB,aAO/BC,SAP+B,CAOlBD,QAPkB;AAU3BE,YAAAA,MAV2B,GAUlB;AACbC,cAAAA,OAAO,EAAE;AACPC,gBAAAA,aAAa,cAAYJ,QAAQ,CAACK;AAD3B;AADI,aAVkB;AAAA;AAAA,6CAgB3B3C,KAAK,CAAC4C,MAAN,oBAA8BT,EAA9B,EAAoCK,MAApC,CAhB2B;;AAAA;AAkBjCb,YAAAA,QAAQ,CAAC;AACPC,cAAAA,IAAI,EAAErB;AADC,aAAD,CAAR;AAlBiC;AAAA;;AAAA;AAAA;AAAA;AAsB3B0B,YAAAA,OAtB2B,GAuB/B,aAAMD,QAAN,IAAkB,aAAMA,QAAN,CAAeF,IAAf,CAAoBG,OAAtC,GACI,aAAMD,QAAN,CAAeF,IAAf,CAAoBG,OADxB,GAEI,aAAMA,OAzBqB;;AA0BjC,gBAAIA,OAAO,KAAK,8BAAhB,EAAgD;AAC9CN,cAAAA,QAAQ,CAACL,MAAM,EAAP,CAAR;AACD;;AACDK,YAAAA,QAAQ,CAAC;AACPC,cAAAA,IAAI,EAAEnB,mBADC;AAEPsB,cAAAA,OAAO,EAAEE;AAFF,aAAD,CAAR;;AA7BiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAR;AAAA,CAAtB;AAoCP,OAAO,IAAMY,aAAa,GAAG,SAAhBA,aAAgB;AAAA,SAAM,kBAAOlB,QAAP,EAAiBU,QAAjB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAE/BV,YAAAA,QAAQ,CAAC;AACPC,cAAAA,IAAI,EAAElB;AADC,aAAD,CAAR;AAF+B,yBAQ3B2B,QAAQ,EARmB,EAOhBC,QAPgB,cAO7BC,SAP6B,CAOhBD,QAPgB;AAUzBE,YAAAA,MAVyB,GAUhB;AACbC,cAAAA,OAAO,EAAE;AACPC,gBAAAA,aAAa,cAAYJ,QAAQ,CAACK;AAD3B;AADI,aAVgB;AAAA;AAAA,6CAgBR3C,KAAK,CAAC8C,IAAN,kBAA4B,EAA5B,EAAgCN,MAAhC,CAhBQ;;AAAA;AAAA;AAgBvBV,YAAAA,IAhBuB,qBAgBvBA,IAhBuB;AAkB/BH,YAAAA,QAAQ,CAAC;AACPC,cAAAA,IAAI,EAAEjB,sBADC;AAEPoB,cAAAA,OAAO,EAAED;AAFF,aAAD,CAAR;AAlB+B;AAAA;;AAAA;AAAA;AAAA;AAuBzBG,YAAAA,OAvByB,GAwB7B,aAAMD,QAAN,IAAkB,aAAMA,QAAN,CAAeF,IAAf,CAAoBG,OAAtC,GACI,aAAMD,QAAN,CAAeF,IAAf,CAAoBG,OADxB,GAEI,aAAMA,OA1BmB;;AA2B/B,gBAAIA,OAAO,KAAK,8BAAhB,EAAgD;AAC9CN,cAAAA,QAAQ,CAACL,MAAM,EAAP,CAAR;AACD;;AACDK,YAAAA,QAAQ,CAAC;AACPC,cAAAA,IAAI,EAAEhB,mBADC;AAEPmB,cAAAA,OAAO,EAAEE;AAFF,aAAD,CAAR;;AA9B+B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAN;AAAA,CAAtB;AAqCP,OAAO,IAAMc,aAAa,GAAG,SAAhBA,aAAgB,CAACC,OAAD;AAAA,SAAa,kBAAOrB,QAAP,EAAiBU,QAAjB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEtCV,YAAAA,QAAQ,CAAC;AACPC,cAAAA,IAAI,EAAEf;AADC,aAAD,CAAR;AAFsC,yBAQlCwB,QAAQ,EAR0B,EAOvBC,QAPuB,cAOpCC,SAPoC,CAOvBD,QAPuB;AAUhCE,YAAAA,MAVgC,GAUvB;AACbC,cAAAA,OAAO,EAAE;AACP,gCAAgB,kBADT;AAEPC,gBAAAA,aAAa,cAAYJ,QAAQ,CAACK;AAF3B;AADI,aAVuB;AAAA;AAAA,6CAiBf3C,KAAK,CAACiD,GAAN,oBACJD,OAAO,CAACE,GADJ,EAErBF,OAFqB,EAGrBR,MAHqB,CAjBe;;AAAA;AAAA;AAiB9BV,YAAAA,IAjB8B,oBAiB9BA,IAjB8B;AAuBtCH,YAAAA,QAAQ,CAAC;AACPC,cAAAA,IAAI,EAAEd,sBADC;AAEPiB,cAAAA,OAAO,EAAED;AAFF,aAAD,CAAR;AAvBsC;AAAA;;AAAA;AAAA;AAAA;AA4BhCG,YAAAA,OA5BgC,GA6BpC,aAAMD,QAAN,IAAkB,aAAMA,QAAN,CAAeF,IAAf,CAAoBG,OAAtC,GACI,aAAMD,QAAN,CAAeF,IAAf,CAAoBG,OADxB,GAEI,aAAMA,OA/B0B;;AAgCtC,gBAAIA,OAAO,KAAK,8BAAhB,EAAgD;AAC9CN,cAAAA,QAAQ,CAACL,MAAM,EAAP,CAAR;AACD;;AACDK,YAAAA,QAAQ,CAAC;AACPC,cAAAA,IAAI,EAAEb,mBADC;AAEPgB,cAAAA,OAAO,EAAEE;AAFF,aAAD,CAAR;;AAnCsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAb;AAAA,CAAtB;AA0CP,OAAO,IAAMkB,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,SAAD,EAAYC,MAAZ;AAAA,SAAuB,kBACxD1B,QADwD,EAExDU,QAFwD;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAKtDV,YAAAA,QAAQ,CAAC;AACPC,cAAAA,IAAI,EAAEZ;AADC,aAAD,CAAR;AALsD,yBAWlDqB,QAAQ,EAX0C,EAUvCC,QAVuC,cAUpDC,SAVoD,CAUvCD,QAVuC;AAahDE,YAAAA,MAbgD,GAavC;AACbC,cAAAA,OAAO,EAAE;AACP,gCAAgB,kBADT;AAEPC,gBAAAA,aAAa,cAAYJ,QAAQ,CAACK;AAF3B;AADI,aAbuC;AAAA;AAAA,6CAoBhD3C,KAAK,CAAC8C,IAAN,oBAA4BM,SAA5B,eAAiDC,MAAjD,EAAyDb,MAAzD,CApBgD;;AAAA;AAsBtDb,YAAAA,QAAQ,CAAC;AACPC,cAAAA,IAAI,EAAEX;AADC,aAAD,CAAR;AAtBsD;AAAA;;AAAA;AAAA;AAAA;AA0BhDgB,YAAAA,OA1BgD,GA2BpD,aAAMD,QAAN,IAAkB,aAAMA,QAAN,CAAeF,IAAf,CAAoBG,OAAtC,GACI,aAAMD,QAAN,CAAeF,IAAf,CAAoBG,OADxB,GAEI,aAAMA,OA7B0C;;AA8BtD,gBAAIA,OAAO,KAAK,8BAAhB,EAAgD;AAC9CN,cAAAA,QAAQ,CAACL,MAAM,EAAP,CAAR;AACD;;AACDK,YAAAA,QAAQ,CAAC;AACPC,cAAAA,IAAI,EAAEV,0BADC;AAEPa,cAAAA,OAAO,EAAEE;AAFF,aAAD,CAAR;;AAjCsD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAvB;AAAA,CAA5B;AAwCP,OAAO,IAAMqB,eAAe,GAAG,SAAlBA,eAAkB;AAAA,SAAM,kBAAO3B,QAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEjCA,YAAAA,QAAQ,CAAC;AAAEC,cAAAA,IAAI,EAAET;AAAR,aAAD,CAAR;AAFiC;AAAA,6CAIVnB,KAAK,CAAC6B,GAAN,qBAJU;;AAAA;AAAA;AAIzBC,YAAAA,IAJyB,qBAIzBA,IAJyB;AAMjCH,YAAAA,QAAQ,CAAC;AACPC,cAAAA,IAAI,EAAER,mBADC;AAEPW,cAAAA,OAAO,EAAED;AAFF,aAAD,CAAR;AANiC;AAAA;;AAAA;AAAA;AAAA;AAWjCH,YAAAA,QAAQ,CAAC;AACPC,cAAAA,IAAI,EAAEP,gBADC;AAEPU,cAAAA,OAAO,EACL,aAAMC,QAAN,IAAkB,aAAMA,QAAN,CAAeF,IAAf,CAAoBG,OAAtC,GACI,aAAMD,QAAN,CAAeF,IAAf,CAAoBG,OADxB,GAEI,aAAMA;AALL,aAAD,CAAR;;AAXiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAN;AAAA,CAAxB","sourcesContent":["import axios from 'axios'\nimport {\n  PRODUCT_LIST_REQUEST,\n  PRODUCT_LIST_SUCCESS,\n  PRODUCT_LIST_FAIL,\n  PRODUCT_DETAILS_REQUEST,\n  PRODUCT_DETAILS_SUCCESS,\n  PRODUCT_DETAILS_FAIL,\n  PRODUCT_DELETE_SUCCESS,\n  PRODUCT_DELETE_REQUEST,\n  PRODUCT_DELETE_FAIL,\n  PRODUCT_CREATE_REQUEST,\n  PRODUCT_CREATE_SUCCESS,\n  PRODUCT_CREATE_FAIL,\n  PRODUCT_UPDATE_REQUEST,\n  PRODUCT_UPDATE_SUCCESS,\n  PRODUCT_UPDATE_FAIL,\n  PRODUCT_CREATE_REVIEW_REQUEST,\n  PRODUCT_CREATE_REVIEW_SUCCESS,\n  PRODUCT_CREATE_REVIEW_FAIL,\n  PRODUCT_TOP_REQUEST,\n  PRODUCT_TOP_SUCCESS,\n  PRODUCT_TOP_FAIL,\n} from '../constants/productConstants'\nimport { logout } from './userActions'\nimport baseURL from \"../../assets/common/baseUrl\";\nexport const listProducts = (keyword = '', pageNumber = '') => async (\n  dispatch\n) => {\n  try {\n    dispatch({ type: PRODUCT_LIST_REQUEST })\n\n    const { data } = await axios.get(\n      `${baseURL}products?keyword=${keyword}&pageNumber=${pageNumber}`\n    )\n\n    dispatch({\n      type: PRODUCT_LIST_SUCCESS,\n      payload: data,\n    })\n  } catch (error) {\n    dispatch({\n      type: PRODUCT_LIST_FAIL,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    })\n  }\n}\n\nexport const listProductDetails = (id) => async (dispatch) => {\n  try {\n    dispatch({ type: PRODUCT_DETAILS_REQUEST })\n\n    const { data } = await axios.get(`/api/products/${id}`)\n\n    dispatch({\n      type: PRODUCT_DETAILS_SUCCESS,\n      payload: data,\n    })\n  } catch (error) {\n    dispatch({\n      type: PRODUCT_DETAILS_FAIL,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    })\n  }\n}\n\nexport const deleteProduct = (id) => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: PRODUCT_DELETE_REQUEST,\n    })\n\n    const {\n      userLogin: { userInfo },\n    } = getState()\n\n    const config = {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`,\n      },\n    }\n\n    await axios.delete(`/api/products/${id}`, config)\n\n    dispatch({\n      type: PRODUCT_DELETE_SUCCESS,\n    })\n  } catch (error) {\n    const message =\n      error.response && error.response.data.message\n        ? error.response.data.message\n        : error.message\n    if (message === 'Not authorized, token failed') {\n      dispatch(logout())\n    }\n    dispatch({\n      type: PRODUCT_DELETE_FAIL,\n      payload: message,\n    })\n  }\n}\n\nexport const createProduct = () => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: PRODUCT_CREATE_REQUEST,\n    })\n\n    const {\n      userLogin: { userInfo },\n    } = getState()\n\n    const config = {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`,\n      },\n    }\n\n    const { data } = await axios.post(`/api/products`, {}, config)\n\n    dispatch({\n      type: PRODUCT_CREATE_SUCCESS,\n      payload: data,\n    })\n  } catch (error) {\n    const message =\n      error.response && error.response.data.message\n        ? error.response.data.message\n        : error.message\n    if (message === 'Not authorized, token failed') {\n      dispatch(logout())\n    }\n    dispatch({\n      type: PRODUCT_CREATE_FAIL,\n      payload: message,\n    })\n  }\n}\n\nexport const updateProduct = (product) => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: PRODUCT_UPDATE_REQUEST,\n    })\n\n    const {\n      userLogin: { userInfo },\n    } = getState()\n\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${userInfo.token}`,\n      },\n    }\n\n    const { data } = await axios.put(\n      `/api/products/${product._id}`,\n      product,\n      config\n    )\n\n    dispatch({\n      type: PRODUCT_UPDATE_SUCCESS,\n      payload: data,\n    })\n  } catch (error) {\n    const message =\n      error.response && error.response.data.message\n        ? error.response.data.message\n        : error.message\n    if (message === 'Not authorized, token failed') {\n      dispatch(logout())\n    }\n    dispatch({\n      type: PRODUCT_UPDATE_FAIL,\n      payload: message,\n    })\n  }\n}\n\nexport const createProductReview = (productId, review) => async (\n  dispatch,\n  getState\n) => {\n  try {\n    dispatch({\n      type: PRODUCT_CREATE_REVIEW_REQUEST,\n    })\n\n    const {\n      userLogin: { userInfo },\n    } = getState()\n\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${userInfo.token}`,\n      },\n    }\n\n    await axios.post(`/api/products/${productId}/reviews`, review, config)\n\n    dispatch({\n      type: PRODUCT_CREATE_REVIEW_SUCCESS,\n    })\n  } catch (error) {\n    const message =\n      error.response && error.response.data.message\n        ? error.response.data.message\n        : error.message\n    if (message === 'Not authorized, token failed') {\n      dispatch(logout())\n    }\n    dispatch({\n      type: PRODUCT_CREATE_REVIEW_FAIL,\n      payload: message,\n    })\n  }\n}\n\nexport const listTopProducts = () => async (dispatch) => {\n  try {\n    dispatch({ type: PRODUCT_TOP_REQUEST })\n\n    const { data } = await axios.get(`/api/products/top`)\n\n    dispatch({\n      type: PRODUCT_TOP_SUCCESS,\n      payload: data,\n    })\n  } catch (error) {\n    dispatch({\n      type: PRODUCT_TOP_FAIL,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    })\n  }\n}\n"]},"metadata":{},"sourceType":"module"}